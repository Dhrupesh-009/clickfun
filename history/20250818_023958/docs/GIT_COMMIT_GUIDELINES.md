# 📝 Git 提交規範指南

## 🎯 七大黃金法則

基於業界最佳實踐，遵循以下七個核心原則：

1. **標題與內文用空行分隔**
2. **標題限制在 50 字元以內**
3. **標題首字母大寫**
4. **標題結尾不加句號**
5. **標題使用祈使語氣**
6. **內文每行限制 72 字元**
7. **內文說明「什麼」和「為什麼」，而非「如何」**

## 🎯 提交訊息格式

### 基本結構

```
<類型>(<範圍>): <簡短描述>

<詳細描述>

<頁腳>
```

### 完整範例

```
feat(遊戲): 新增雙人對戰模式

實作分屏遊戲介面以支援兩位玩家同時遊玩。此功能解決了
使用者希望與朋友競賽的需求，提升遊戲的社交互動性。

主要變更：
- 實作分屏遊戲介面
- 新增玩家分數即時比較功能
- 支援同時多點觸控操作
- 優化觸控事件處理邏輯

Closes #123
```

## 📋 提交類型 (Type)

### 🚀 功能開發

- **feat**: 新增功能
- **enhance**: 功能增強
- **perf**: 效能優化

### 🐛 問題修復

- **fix**: 錯誤修復
- **hotfix**: 緊急修復
- **security**: 安全性修復

### � 文檔與維護

- **docs**: 文檔更新
- **style**: 程式碼格式調整（不影響功能）
- **refactor**: 程式碼重構

### 🧪 測試與工具

- **test**: 測試相關
- **build**: 建置系統
- **ci**: CI/CD 配置
- **chore**: 雜項任務

### 🔄 版本控制

- **revert**: 回退提交
- **merge**: 合併分支

## 🎯 範圍 (Scope)

### 遊戲功能

- **遊戲**: 核心遊戲邏輯
- **UI**: 使用者介面
- **動畫**: 視覺效果
- **音效**: 聲音系統

### 技術架構

- **PWA**: Progressive Web App 功能
- **效能**: 效能相關優化
- **快取**: 快取機制
- **API**: 介面設計

### 開發工具

- **測試**: 測試相關
- **建置**: 建置流程
- **部署**: 部署配置
- **文檔**: 文檔維護

## ✅ 良好範例

### 功能開發

```
feat(遊戲): 新增 TPS 即時顯示功能

實作基於滑動窗口的 TPS 計算系統，提供玩家即時的點擊
速度反饋。當 TPS 超過 30 時觸發特殊 RGB 動畫效果，
增強遊戲的視覺回饋和成就感。

技術實作：
- 使用 1 秒滑動窗口演算法確保準確性
- 每 100ms 更新一次顯示，提供流暢體驗
- 實作記憶體管理避免資料累積造成效能問題
- 新增 TPS 閾值觸發的視覺特效系統

效能測試：在高頻點擊下 CPU 使用率 < 5%

Closes #45
```

### 錯誤修復

```
fix(動畫): 修復閃電效果在 Safari 上的渲染問題

Safari 瀏覽器對 OffscreenCanvas 的支援有限，導致閃電
動畫無法正常顯示。改用 Canvas 2D API 作為後備方案，
確保在所有主流瀏覽器上都能正常運作。

根本原因：Safari 14 以下版本不支援 OffscreenCanvas
解決方案：實作瀏覽器特性檢測與降級處理

測試環境：Safari 13.1, 14.0, 15.0 均已驗證正常

Fixes #67
```

### 效能優化

```
perf(渲染): 優化動畫幀率至穩定 60 FPS

原先使用 setInterval 導致動畫不穩定，在高負載時會
掉幀。改用 requestAnimationFrame 並實作物件池模式，
大幅提升渲染效能。

優化項目：
- 使用 requestAnimationFrame 同步瀏覽器重繪
- 實作動畫物件池減少 GC 壓力
- 優化 Canvas 繪製邏輯，減少重複計算
- 新增效能監控，即時調整動畫複雜度

基準測試：
- 平均幀率：45 FPS → 60 FPS
- 記憶體使用：-30%
- CPU 使用率：-25%
```

### 文檔更新

```
docs(README): 更新安裝與使用說明

隨著 PWA 功能的完善，需要更新使用者指南以涵蓋新的
安裝方式和功能特色。同時補充瀏覽器相容性資訊，
幫助使用者選擇最佳的遊戲環境。

更新內容：
- 新增 PWA 安裝步驟與截圖說明
- 補充各瀏覽器相容性對照表
- 更新遊戲操作說明與快捷鍵
- 新增常見問題解答章節
```

## ❌ 避免的範例

### 過於簡短

```
❌ fix: bug
❌ update: stuff
❌ 修復
```

### 過於冗長

```
❌ feat(遊戲): 新增了一個非常棒的雙人對戰模式功能，包含了分屏顯示、即時分數比較、多點觸控支援等等功能
```

### 不清楚的描述

```
❌ fix: 修復一些問題
❌ update: 改善使用者體驗
❌ chore: 雜項更新
```

## 🔧 Git 配置建議

### 設定使用者資訊

```bash
git config --global user.name "你的姓名"
git config --global user.email "your.email@example.com"
```

### 設定預設分支名稱

```bash
git config --global init.defaultBranch main
```

### 設定提交範本

```bash
git config --global commit.template ~/.gitmessage
```

### 建立提交範本檔案

```bash
# ~/.gitmessage
<類型>(<範圍>): <簡短描述>

# 詳細說明提交的內容和原因
#
# 相關議題：
# Closes #123
# Fixes #456
# Refs #789
```

## 📊 分支管理策略

### 主要分支

- **main**: 主要穩定分支
- **develop**: 開發整合分支

### 功能分支

- **feature/功能名稱**: 新功能開發
- **fix/問題描述**: 錯誤修復
- **hotfix/緊急修復**: 生產環境緊急修復

### 分支命名範例

```
feature/dual-player-mode
feature/tps-display
fix/safari-animation-bug
hotfix/pwa-cache-issue
```

## 🏷️ 標籤管理

### 版本標籤格式

```
v主版本.次版本.修訂版本
```

### 範例

```bash
git tag -a v1.0.0 -m "正式版本 1.0.0 發布"
git tag -a v1.1.0 -m "新增雙人對戰模式"
git tag -a v1.1.1 -m "修復動畫效能問題"
```

## 📝 提交前檢查清單

### ✅ 程式碼品質

- [ ] 程式碼已通過測試
- [ ] 沒有語法錯誤
- [ ] 符合專案程式碼風格
- [ ] 移除了除錯用的 console.log

### ✅ 提交訊息

- [ ] 使用正確的提交類型
- [ ] 簡短描述清楚明確
- [ ] 包含必要的詳細說明
- [ ] 引用相關的議題編號

### ✅ 檔案管理

- [ ] 只提交相關的變更檔案
- [ ] 沒有提交暫存或建置檔案
- [ ] .gitignore 設定正確

## 🎯 最佳實踐建議

### 提交頻率與品質

- **原子性提交**: 每次提交只包含一個邏輯變更
- **完整性**: 每次提交後專案都應該能正常運作
- **頻繁提交**: 完成小功能就提交，避免大批量變更
- **可回退性**: 確保每次提交都可以安全回退

### 訊息撰寫技巧

- **祈使語氣**: 使用「新增」而非「新增了」
- **現在式**: 描述提交「做什麼」而非「做了什麼」
- **簡潔明確**: 50 字元內說清楚核心變更
- **解釋動機**: 在內文說明「為什麼」做這個變更

### 協作與維護

- **程式碼審查**: 使用 Pull Request 進行同儕審查
- **分支策略**: 採用 Git Flow 或 GitHub Flow
- **自動化**: CI/CD 管道確保提交品質
- **文檔同步**: 重要變更同步更新 CHANGELOG

### 工具與自動化

```bash
# 設定提交範本
git config --global commit.template ~/.gitmessage

# 啟用提交訊息編輯器
git config --global core.editor "code --wait"

# 設定自動換行
git config --global core.autocrlf input
```

### 團隊規範建議

- **統一工具**: 團隊使用相同的 Git 配置
- **定期檢視**: 週期性檢視提交歷史品質
- **培訓分享**: 定期分享最佳實踐經驗
- **持續改進**: 根據專案需求調整規範

---

## 🏆 為什麼要遵循這些規範？

### 對個人的好處

- 🧠 **提升思考**: 強迫整理變更邏輯
- 📚 **知識管理**: 建立個人技術成長記錄
- 🔍 **問題追蹤**: 快速定位歷史問題
- 💡 **學習回顧**: 回顧過去的解決方案

### 對團隊的好處

- 🤝 **協作效率**: 清楚了解他人的變更
- 📈 **品質提升**: 減少因溝通不良造成的錯誤
- 🚀 **開發速度**: 快速理解專案演進歷程
- 🛡️ **風險控制**: 精確的回退和熱修復

### 對專案的好處

- 📊 **可維護性**: 長期專案的生命力保證
- 🔄 **版本管理**: 清晰的發布和回退策略
- 📖 **文檔化**: 提交歷史即是最真實的文檔
- 🎯 **專業形象**: 展現專案的專業水準

記住：**優秀的提交訊息是給未來的自己和團隊最珍貴的禮物！** 🎁

每一次用心撰寫的提交訊息，都是對專案品質的投資，
也是對團隊協作的貢獻。讓我們一起打造更好的程式碼歷史！ ✨
